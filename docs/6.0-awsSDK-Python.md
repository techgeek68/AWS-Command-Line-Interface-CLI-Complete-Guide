# AWS SDK Developer Guide — Python (Boto3)

> Focus: Installation (Linux/macOS/Windows), credential configuration, core usage patterns (clients, resources, pagination, waiters, retries), example scripts (list regions, create key pair & security group), best practices, troubleshooting, and advanced integrations.

## Table of Contents
1. Overview
2. Prerequisites
3. Install & Verify
4. Virtual Environments
5. Credential Configuration
6. Core Usage Patterns
7. Example Scripts
8. Pagination & Waiters
9. Retries, Timeouts & Config
10. Logging & Instrumentation
11. Testing & Local Development
12. Common Errors & Troubleshooting
13. Extended Patterns & Integrations

---

## 1. Overview
Boto3 is the AWS SDK for Python, simplifying API calls by handling request signing (SigV4), retries, pagination, and response parsing.

---

## 2. Prerequisites
- Python 3.8+
- AWS account credentials (IAM user, assumed role, or SSO).
- AWS CLI v2 (recommended for initial credential setup).
- Network access to AWS endpoints.

---

## 3. Install & Verify

### Linux (Debian/Ubuntu)
```bash
sudo apt install python3-dev
```
```bash
sudo apt update && sudo apt install -y python3 python3-venv python3-pip
```
```bash
python3 -m venv ~/.venvs/aws-sdk
```
```bash
source ~/.venvs/aws-sdk/bin/activate
```
```bash
pip install --upgrade pip
```
```bash
pip install boto3
```
```bash
python -c "import boto3; print('boto3 version:', boto3.__version__)"
```

### RHEL / CentOS / Amazon Linux
```bash
sudo yum install python3-devel
```
```bash
sudo yum install -y python3 python3-pip python3-venv
```
```bash
python3 -m venv ~/.venvs/aws-sdk
```
```bash
source ~/.venvs/aws-sdk/bin/activate
```
```bash
pip install -U pip boto3
```

### macOS (Homebrew)
```bash
brew update
```
```bash
brew install python
```
```bash
python3 -m venv ~/.venvs/aws-sdk
```
```bash
source ~/.venvs/aws-sdk/bin/activate
```
```bash
pip install -U pip boto3
```

### Windows (PowerShell)

Prerequisite:
1. **Python (3.8+) installed**

   * [Download Python](https://www.python.org/downloads/windows/) and install it on Windows.
   * During installation, make sure to **check “Add Python to PATH”**.

2. **PowerShell** (comes by default with Windows)

3. **(Optional but recommended)** AWS CLI (for credentials setup)
   
Create the virtual environment:
```powershell
  python -m venv $env:USERPROFILE\.venvs\aws-sdk
```
Activate the virtual environment (with call operator & and quotes):
```powershell
  & "$env:USERPROFILE\.venvs\aws-sdk\Scripts\Activate.ps1"
```
> PowerShell may block scripts by default for security reasons; you need to adjust the execution policy to allow local scripts to run:
```powershell
  Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned
```

Upgrade pip inside the venv:
```powershell
python -m pip install --upgrade pip
```
Install boto3:
```powershell
pip install boto3
```
Verify boto3 installation:
```powershell
python -c "import boto3; print(boto3.__version__)"
```
---

## 4. Virtual Environments
- A virtual environment is an isolated Python workspace for managing project-specific libraries and dependencies. It helps avoid conflicts between project requirements and keeps your global Python installation clean.

| Command (Windows)                                  | Command (Linux/macOS)                    | Location                        | Typical Use                        |
|----------------------------------------------------|------------------------------------------|---------------------------------|------------------------------------|
| `python -m venv $env:USERPROFILE\.venvs\aws-sdk`   | `python3 -m venv ~/.venvs/aws-sdk`       | User profile folder (`.venvs`)  | Centralized venv management        |
| `python -m venv .venv`                             | `python3 -m venv .venv`                  | Project folder (`.venv` subdir) | Project-local venv (recommended)   |

Example:

#Create a project directory
```
  mkdir weather-app
```
```
  cd weather-app
```

#Create a virtual environment named .venv
```
  python -m venv .venv
```

#Activate the virtual environment
```
#On Windows
  .\.venv\Scripts\activate
```
```
#On macOS/Linux
  source .venv/bin/activate
```

#Install a package in the virtual environment
```
  pip install requests
```

#Example Python code using the installed package
```
  notepad app.py
```
```
import requests

response = requests.get('https://api.github.com')
print(response.json())
```

#Run your script
```
  python app.py
```
> It will print information about the GitHub API service, including its current version, supported media types, and other metadata.
#Deactivate the virtual environment when done
```
  deactivate
```
---

## 5. Credential Configuration

> This requires the AWS CLI to be installed.

### AWS CLI (Recommended)                
```bash
  aws configure
```
Writes to:
- Linux/macOS: `~/.aws/credentials`, `~/.aws/config`
- Windows: `%UserProfile%\.aws\credentials`

Example:
  - You must have a profile named `dev` in your AWS credentials
  - Create a script using a text editor, `list_ec2_instances.py`
  - Run the script `python list_ec2_instances.py`
    
```python
import boto3

#Create a session using the 'dev' profile
session = boto3.Session(profile_name="dev")

#Create an EC2 client from the session
ec2 = session.client("ec2")

#Describe EC2 instances
response = ec2.describe_instances()

#Loop through reservations and instances, printing Instance IDs
for reservation in response["Reservations"]:
    for instance in reservation["Instances"]:
        print("Instance ID:", instance["InstanceId"])
```
---

## 6. Key Usage Patterns for AWS SDK

### Create Client & Resource
- **Client:**  
  The client is a low-level interface in boto3 that provides direct access to AWS service APIs. You use it for making API calls, such as `boto3.client('ec2', region_name='us-east-1')`, which lets you interact with Amazon EC2 by calling methods like `describe_instances()`.

- **Resource:**  
  The resource is a higher-level, object-oriented interface in boto3. It abstracts away some of the details and allows you to interact with AWS services using Python objects. For example, `boto3.resource('ec2', region_name='us-east-1')` lets you work with EC2 instances as Python objects, such as iterating over `ec2.instances.all()`.

- **Usage:**  
  Use the client when you need full API coverage or precise control. Use the resource for simpler, more Pythonic access to AWS services. Both require AWS credentials and a region to be specified.


**Example: Creates an EC2 client object using Boto3, which allows you to interact with Amazon EC2**

 After creating an EC2 client for a region, you can:
  - Manage instances: launch, list, start, stop, terminate.
  - Handle networking: security groups, Elastic IPs, VPC settings.
  - Work with storage: create, attach, detach EBS volumes.
  - Manage AMIs: create or deregister images.
  - Other tasks: create key pairs, manage tags, query regions/zones
    
The EC2 client lets you programmatically control all EC2 resources in that region.

      `notepad ec2client.py` or `vi ec2client.py`

```python
import boto3

#Create an EC2 client for the 'us-east-1' region
ec2_client = boto3.client("ec2", region_name="us-east-1")

#Print a human-readable description of the client object
print("Successfully created EC2 client for region 'us-east-1'.")
print(f"Client Info:\nService: {ec2_client.meta.service_model.service_name}\nRegion: {ec2_client.meta.region_name}")

#Example: List EC2 instance IDs in a clean format
response = ec2_client.describe_instances()
print("Your EC2 Instances:")
for reservation in response.get("Reservations", []):
    for instance in reservation.get("Instances", []):
        print(f"  - Instance ID: {instance['InstanceId']}")
```
Run
```
  python ec2client.py
```


**Example: Creates an S3 resource object using Boto3, which allows you to interact with Amazon S3**
The S3 resource object provides a high-level, object-oriented interface to programmatically control all S3 resources in your account.
After creating an S3 resource object using boto3, you can:
  - Manage buckets: create, list, and delete buckets.
  - Work with objects: upload, download, list, copy, delete objects within buckets.
  - Set permissions: configure bucket and object policies, ACLs.
  - Versioning & lifecycle: enable versioning, set lifecycle rules.
  - Manage events: set up event notifications for bucket activities.
  - Advanced features: use multipart uploads, server-side encryption, and object tagging.

 `notepad s3resource.py` or `vi s3resource.py`

```python
import boto3

#Create an S3 resource object (default region from your AWS config)
s3_resource = boto3.resource("s3")

#Print a human-readable description of the resource object
print("Successfully created S3 resource object.")
print(f"Resource Info:\nService: {s3_resource.meta.service_name}")

#Example: List all S3 bucket names in a clean format
print("Your S3 Buckets:")
for bucket in s3_resource.buckets.all():
    print(f"  - {bucket.name}")
```

Run:
```python
  python s3resource.py
```

### Creating Waiters
A waiter is a utility that pauses your code until a certain AWS resource reaches a desired state. The following example is a waiter that pauses your script until the specified EC2 instance is `running` state.
```python
ec2_client.get_waiter("instance_running").wait(InstanceIds=[instance_id])
```

### Pagination
Pagination is a technique for splitting large sets of data into smaller, manageable chunks called "pages." Instead of retrieving or displaying all data at once, which may be impractical for large datasets, pagination lets you fetch or show data in portions. This improves performance and usability.


> Example in real life:
  > Google search results show 10 results per page instead of thousands at once.
  > In AWS: If you have hundreds of EC2 instances or S3 objects, a single API call might not       return everything. The results are split into pages.
  
Example:
  - Lists all EC2 instance IDs in your AWS account for the region the client is configured         for.
  - Works even if you have hundreds of instances, because the paginator handles multiple         pages of results automatically.
    
```python
paginator = ec2_client.get_paginator("describe_instances")

for page in paginator.paginate():
    for reservation in page["Reservations"]:
        for instance in reservation["Instances"]:
            print(instance["InstanceId"])
```
---

## 7. Example Scripts
Refer to the separate code files with names starting from 6.0.1.1-
  

---

## 8. Pagination & Waiters

| Feature   | Purpose                | Example                          |
|-----------|------------------------|----------------------------------|
| Paginator | Iterate through large result sets | `get_paginator('list_objects_v2')` |
| Waiter    | Poll for state         | `get_waiter('bucket_exists')`    |

Use waiters to avoid manual polling loops; inspect available waiters via `botocore` docs or `dir(client.waiter_names)`.

---

## 9. Retries, Timeouts & Config
When interacting with AWS services using boto3, you often need to handle unreliable network connections, slow responses, or throttling errors. The Config object from botocore lets you fine-tune how your AWS client handles:
  - Retries: Automatically reattempting failed requests.
  - Timeouts: How long to wait for a connection or a response.
  - Other Client Behaviors: Such as SSL options, proxies, and more.
    
Example: Configuring AWS Client Retries and Timeouts with boto3
    
```python
from botocore.config import Config
cfg = Config(
  retries={"mode": "standard", "max_attempts": 5},
  connect_timeout=5,
  read_timeout=60
)
s3 = boto3.client("s3", config=cfg)
```

  - retries: Try up to 5 times (max_attempts) if a request fails, using the standard retry mode.
  - connect_timeout: Wait up to 5 seconds to establish a connection before giving up.
  - read_timeout: Wait up to 60 seconds for a server response after connection.
  - adaptive mode: Adds client-side rate limiting to automatically slow down requests if AWS returns         throttling errors.
  - Modes: `standard`, `adaptive` (adaptive adds client-side rate limiting).
---

## 10. Logging & Instrumentation

Instrumentation means adding monitoring hooks to your application—to collect metrics, logs, and traces about what it's doing.
The text mentions AWS X-Ray, a service for distributed tracing: following requests as they move through your application and AWS services.
If you need broader instrumentation (beyond just AWS SDK calls), you can use AWS Distro for OpenTelemetry (ADOT)—an open-source toolkit for collecting traces, metrics, and logs.

Example:
Sets the logging level for AWS SDK

```python
import boto3, logging
boto3.set_stream_logger("botocore", level=logging.INFO)
```

This will print informational logs from botocore (the core library behind Boto3) to the console.
You can adjust the level (DEBUG, INFO, WARNING, etc.) depending on how much detail you want

---

## 11. Testing & Local Development
| Tool      | Use Case                     |
|-----------|-----------------------------|
| moto      | Mock AWS services in unit tests |
| LocalStack| Local AWS-like endpoints     |
| pytest fixtures | Reusable session setup |

`moto` example:
```python
from moto import mock_s3
@mock_s3
def test_bucket():
    s3 = boto3.client("s3")
    s3.create_bucket(Bucket="demo")
    assert any(b["Name"]=="demo" for b in s3.list_buckets()["Buckets"])
```

---

## 12. Common Errors & Troubleshooting
| Error                   | Cause                  | Fix                                  |
|-------------------------|------------------------|--------------------------------------|
| `NoCredentialsError`    | Missing credentials    | Run `aws configure` or export env vars |
| `InvalidClientTokenId`  | Bad/rotated keys       | Rotate or correct keys               |
| `AccessDenied`          | IAM permission gap     | Update IAM policy                    |
| ThrottlingException     | Exceeded API rate      | Backoff & retry (configure retries)  |
| EndpointConnectionError | Network/proxy block    | Configure proxy / allowlist domains  |
| `ModuleNotFoundError`   | Env inactive           | Activate venv / reinstall boto3      |
| SSL errors              | Outdated CA            | Update OS certs or install `certifi` |

---

## 13. Extended Patterns & Integrations

### Multi-Account Automation Example

Automate tasks across multiple AWS accounts using `boto3.Session` with different profiles or assumed roles.

```python
import boto3

accounts = [
    {"profile": "dev", "region": "us-east-1"},
    {"profile": "prod", "region": "us-west-2"}
]

for account in accounts:
    session = boto3.Session(profile_name=account["profile"], region_name=account["region"])
    ec2 = session.client("ec2")
    instances = ec2.describe_instances()
    print(f"Account {account['profile']}: {len(instances['Reservations'])} reservations")
```

For assumed roles with STS:
```python
sts = boto3.client("sts")
resp = sts.assume_role(RoleArn="arn:aws:iam::<account-id>:role/AutomationRole", RoleSessionName="x-session")
creds = resp["Credentials"]
session = boto3.Session(
    aws_access_key_id=creds["AccessKeyId"],
    aws_secret_access_key=creds["SecretAccessKey"],
    aws_session_token=creds["SessionToken"]
)
# Use session as usual
```

---

### Cross-Region Deployment Example

Deploy resources in multiple regions:

```python
regions = ["us-east-1", "eu-west-1"]
for region in regions:
    ec2 = boto3.client("ec2", region_name=region)
    ec2.run_instances(ImageId="ami-xxxx", MinCount=1, MaxCount=1)
    print(f"Launched EC2 in {region}")
```

---

### Official AWS References

- [Boto3 Documentation](https://boto3.amazonaws.com/v1/documentation/api/latest/index.html)
- [AWS Python SDK Developer Guide](https://docs.aws.amazon.com/sdk-for-python/)
- [AWS Reference Architectures](https://aws.amazon.com/architecture/)
- [AWS Service Quotas](https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html)
- [AWS Security Best Practices](https://docs.aws.amazon.com/general/latest/gr/aws-security-best-practices.html)

---

### New Services & Infrastructure-as-Code Integration

#### New AWS Services

- Many AWS services (e.g., EventBridge, Step Functions, Bedrock, etc.) are supported in Boto3. Check [Boto3 Services List](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/index.html) for details and supported methods.

#### Infrastructure-as-Code (IaC) Tools

- **AWS Cloud Development Kit (CDK):** Modern IaC framework for Python. [CDK Docs](https://docs.aws.amazon.com/cdk/latest/guide/home.html)
- **Terraform:** IaC for multi-cloud, including AWS. [Terraform AWS Provider Docs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)
- **Pulumi:** Supports Python for cloud resource provisioning. [Pulumi AWS Docs](https://www.pulumi.com/registry/packages/aws/)

---

Best practice: Use SDK scripts for dynamic or ad-hoc tasks, and IaC tools for repeatable infrastructure and compliance.

---
